<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZahirTV - VIP </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #0f172a;
            color: #f8fafc;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Header */
        header {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
            padding: 20px 0;
            border-bottom: 2px solid #3b82f6;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo h1 {
            color: #3b82f6;
            font-size: 32px;
            text-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
        }
        
        .logo span {
            color: #f59e0b;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .jeton-display {
            background-color: #1e293b;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            color: #fbbf24;
            border: 1px solid #3b82f6;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .jeton-icon {
            color: #fbbf24;
        }
        
        .logout-btn {
            background-color: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .logout-btn:hover {
            background-color: #2563eb;
        }
        
        /* Ana iÃ§erik alanÄ± */
        .content {
            display: flex;
            gap: 30px;
            margin-top: 30px;
        }
        
        /* Yan panel */
        .sidebar {
            width: 250px;
            background-color: #1e293b;
            border-radius: 10px;
            padding: 20px;
            height: fit-content;
        }
        
        .nav-menu {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .nav-menu li {
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .nav-menu li:hover {
            background-color: #334155;
        }
        
        .nav-menu li.active {
            background-color: #3b82f6;
            font-weight: bold;
        }
        
        /* Ana panel */
        .main-panel {
            flex: 1;
            background-color: #1e293b;
            border-radius: 10px;
            padding: 30px;
        }
        
        .section-title {
            color: #3b82f6;
            border-bottom: 2px solid #3b82f6;
            padding-bottom: 10px;
            margin-bottom: 25px;
            font-size: 24px;
        }
        
        /* GiriÅŸ/KayÄ±t formlarÄ± */
        .auth-form {
            max-width: 400px;
            margin: 0 auto;
            background-color: #334155;
            padding: 30px;
            border-radius: 10px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #cbd5e1;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid #475569;
            background-color: #1e293b;
            color: white;
            font-size: 16px;
        }
        
        .auth-btn {
            width: 100%;
            padding: 12px;
            background-color: #3b82f6;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-top: 10px;
        }
        
        .auth-btn:hover {
            background-color: #2563eb;
        }
        
        .switch-auth {
            text-align: center;
            margin-top: 20px;
            color: #cbd5e1;
        }
        
        .switch-auth a {
            color: #3b82f6;
            cursor: pointer;
            text-decoration: none;
            font-weight: bold;
        }
        
        /* Film grid */
        .movies-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 25px;
        }
        
        .movie-card {
            background-color: #334155;
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .movie-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        .movie-poster {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }
        
        .movie-info {
            padding: 15px;
        }
        
        .movie-title {
            font-weight: bold;
            margin-bottom: 10px;
            color: #f8fafc;
        }
        
        .movie-price {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .price-tag {
            background-color: #3b82f6;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: bold;
        }
        
        .watch-btn {
            background-color: #10b981;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        
        .watch-btn:hover {
            background-color: #059669;
        }
        
        .watch-btn:disabled {
            background-color: #64748b;
            cursor: not-allowed;
        }
        
        /* Reklam modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: #1e293b;
            padding: 30px;
            border-radius: 10px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .modal-title {
            color: #3b82f6;
            margin-bottom: 20px;
            font-size: 24px;
        }
        
        .ad-container {
            background-color: #0f172a;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #3b82f6;
        }
        
        .ad-text {
            font-size: 32px;
            color: #f59e0b;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(245, 158, 11, 0.5);
            margin: 20px 0;
        }
        
        .countdown {
            font-size: 48px;
            color: #10b981;
            font-weight: bold;
            margin: 20px 0;
        }
        
        .reward-info {
            background-color: #334155;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        /* Arama */
        .search-container {
            margin-bottom: 30px;
        }
        
        .search-box {
            width: 100%;
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #3b82f6;
            background-color: #0f172a;
            color: white;
            font-size: 16px;
        }
        
        /* Bonus bildirim */
        .bonus-notification {
            background-color: #10b981;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .bonus-notification button {
            background-color: #0f172a;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }
        
        /* Tarih gÃ¶sterici */
        .date-display {
            text-align: center;
            margin-top: 20px;
            color: #94a3b8;
            font-size: 14px;
        }
        
        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #334155;
            padding-bottom: 10px;
        }
        
        .tab {
            padding: 10px 20px;
            background-color: #334155;
            border-radius: 5px 5px 0 0;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .tab.active {
            background-color: #3b82f6;
            font-weight: bold;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
            }
            
            .movies-grid {
                grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            }
            
            .header-container {
                flex-direction: column;
                gap: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-container">
            <div class="logo">
                <h1>Zahir<span>TV</span></h1>
            </div>
            <div class="user-info" id="user-info" style="display: none;">
                <div class="jeton-display">
                    <span class="jeton-icon">ðŸª™</span>
                    <span id="jeton-count">90</span> Jeton
                </div>
                <button class="logout-btn" id="logout-btn">Ã‡Ä±kÄ±ÅŸ Yap</button>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="content">
            <!-- Yan panel (sadece giriÅŸ yapÄ±ldÄ±ysa gÃ¶rÃ¼nÃ¼r) -->
            <div class="sidebar" id="sidebar" style="display: none;">
                <ul class="nav-menu">
                    <li class="active" data-section="movies">Filmler</li>
                    <li data-section="watched">Ä°zlediklerim</li>
                    <li data-section="search">Film Ara</li>
                    <li data-section="ad-watch">Reklam Ä°zle (Jeton Kazan)</li>
                    <li data-section="account">HesabÄ±m</li>
                </ul>
                
                <div class="date-display" id="date-display"></div>
            </div>
            
            <!-- Ana panel -->
            <div class="main-panel" id="main-panel">
                <!-- GiriÅŸ/KayÄ±t bÃ¶lÃ¼mÃ¼ (ilk gÃ¶rÃ¼nen) -->
                <div id="auth-section">
                    <div class="tabs">
                        <div class="tab active" data-tab="login">GiriÅŸ Yap</div>
                        <div class="tab" data-tab="register">KayÄ±t Ol</div>
                    </div>
                    
                    <div id="login-form" class="auth-form">
                        <h2 class="section-title">ZahirTV'ye GiriÅŸ Yap</h2>
                        <div class="form-group">
                            <label for="login-username">KullanÄ±cÄ± AdÄ±</label>
                            <input type="text" id="login-username" placeholder="KullanÄ±cÄ± adÄ±nÄ±zÄ± girin">
                        </div>
                        <div class="form-group">
                            <label for="login-password">Åžifre</label>
                            <input type="password" id="login-password" placeholder="Åžifrenizi girin">
                        </div>
                        <button class="auth-btn" id="login-btn">GiriÅŸ Yap</button>
                        <div class="switch-auth">
                            HesabÄ±nÄ±z yok mu? <a id="switch-to-register">KayÄ±t Olun</a>
                        </div>
                    </div>
                    
                    <div id="register-form" class="auth-form" style="display: none;">
                        <h2 class="section-title">ZahirTV'ye KayÄ±t Ol</h2>
                        <div class="form-group">
                            <label for="register-username">KullanÄ±cÄ± AdÄ±</label>
                            <input type="text" id="register-username" placeholder="KullanÄ±cÄ± adÄ± seÃ§in">
                        </div>
                        <div class="form-group">
                            <label for="register-password">Åžifre</label>
                            <input type="password" id="register-password" placeholder="Åžifre seÃ§in">
                        </div>
                        <div class="form-group">
                            <label for="register-password-again">Åžifre Tekrar</label>
                            <input type="password" id="register-password-again" placeholder="Åžifreyi tekrar girin">
                        </div>
                        <button class="auth-btn" id="register-btn">KayÄ±t Ol</button>
                        <div class="switch-auth">
                            Zaten hesabÄ±nÄ±z var mÄ±? <a id="switch-to-login">GiriÅŸ YapÄ±n</a>
                        </div>
                    </div>
                </div>
                
                <!-- Filmler bÃ¶lÃ¼mÃ¼ (giriÅŸ yapÄ±lÄ±nca gÃ¶rÃ¼nÃ¼r) -->
                <div id="movies-section" style="display: none;">
                    <h2 class="section-title">VIP Filmler</h2>
                    
                    <div id="bonus-notification" class="bonus-notification" style="display: none;">
                        <div>
                            <strong>GÃ¼nlÃ¼k GiriÅŸ Bonusu!</strong> BugÃ¼n giriÅŸ yaptÄ±ÄŸÄ±nÄ±z iÃ§in 30 jeton kazandÄ±nÄ±z.
                        </div>
                        <button id="close-bonus">Kapat</button>
                    </div>
                    
                    <div class="movies-grid" id="movies-grid">
                        <!-- Filmler JavaScript ile eklenecek -->
                    </div>
                </div>
                
                <!-- Ä°zlediklerim bÃ¶lÃ¼mÃ¼ -->
                <div id="watched-section" style="display: none;">
                    <h2 class="section-title">Ä°zlediÄŸim Filmler</h2>
                    <div class="movies-grid" id="watched-grid">
                        <!-- Ä°zlenen filmler buraya eklenecek -->
                    </div>
                </div>
                
                <!-- Film arama bÃ¶lÃ¼mÃ¼ -->
                <div id="search-section" style="display: none;">
                    <h2 class="section-title">Film Ara</h2>
                    <div class="search-container">
                        <input type="text" class="search-box" id="search-input" placeholder="Film adÄ±, tÃ¼r veya yÃ¶netmen ara...">
                    </div>
                    <div class="movies-grid" id="search-results">
                        <!-- Arama sonuÃ§larÄ± buraya eklenecek -->
                    </div>
                </div>
                
                <!-- Reklam izleme bÃ¶lÃ¼mÃ¼ -->
                <div id="ad-watch-section" style="display: none;">
                    <h2 class="section-title">Reklam Ä°zle ve Jeton Kazan</h2>
                    <div class="reward-info">
                        <p>Reklam izleyerek gÃ¼nde 1 kez 30 jeton kazanabilirsiniz.</p>
                        <p>Son reklam izleme: <span id="last-ad-watch">HiÃ§ izlemediniz</span></p>
                        <p>BugÃ¼n reklam izleyip izleyemeyeceÄŸiniz: <span id="ad-availability" style="color:#10b981; font-weight:bold;">Evet, izleyebilirsiniz</span></p>
                    </div>
                    
                    <button class="auth-btn" id="watch-ad-btn" style="margin-top: 20px;">Reklam Ä°zle (30 Jeton Kazan)</button>
                </div>
                
                <!-- Hesap bÃ¶lÃ¼mÃ¼ -->
                <div id="account-section" style="display: none;">
                    <h2 class="section-title">Hesap Bilgilerim</h2>
                    <div class="auth-form">
                        <div class="form-group">
                            <label>KullanÄ±cÄ± AdÄ±</label>
                            <input type="text" id="account-username" readonly>
                        </div>
                        <div class="form-group">
                            <label>Toplam Jeton</label>
                            <input type="text" id="account-total-jets" readonly>
                        </div>
                        <div class="form-group">
                            <label>KayÄ±t Tarihi</label>
                            <input type="text" id="account-reg-date" readonly>
                        </div>
                        <div class="form-group">
                            <label>Toplam Ä°zlenen Film</label>
                            <input type="text" id="account-total-watched" readonly>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Reklam modalÄ± -->
    <div class="modal-overlay" id="ad-modal" style="display: none;">
        <div class="modal-content">
            <h2 class="modal-title">Reklam Ä°zliyorsunuz</h2>
            <div class="ad-container">
                <div class="ad-text">Zahir TV - En Ä°yi TV!</div>
                <div class="countdown" id="countdown">5</div>
                <p>Reklam bitince 30 jeton kazanacaksÄ±nÄ±z...</p>
            </div>
            <div class="reward-info">
                <p>ReklamÄ± tam izleyerek <strong>30 jeton</strong> kazanacaksÄ±nÄ±z.</p>
                <p>LÃ¼tfen bekleyin, reklam otomatik kapanacaktÄ±r.</p>
            </div>
        </div>
    </div>
    
    <script>
        // Uygulama durumu
        const state = {
            currentUser: null,
            users: JSON.parse(localStorage.getItem('zahirTVUsers')) || [],
            movies: [
                { id: 1, title: "Vizontele", genre: "Komedi", year: 2000, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1536440136628-849c177e76a1?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 2, title: "Kurtlar Vadisi Irak", genre: "Aksiyon", year: 2006, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1535016120720-40c646be5580?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 3, title: "Recep Ä°vedik", genre: "Komedi", year: 2008, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1489599809516-9827b6d1cf13?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 4, title: "DÃ¼ÄŸÃ¼n Dernek", genre: "Komedi", year: 2013, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1542204165-65bf26472b9b?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 5, title: "A.R.O.G", genre: "Komedi", year: 2008, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1517604931442-7e0c8ed2963c?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 6, title: "G.O.R.A", genre: "Bilim Kurgu", year: 2004, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1534447677768-be436bb09401?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 7, title: "EÅŸkiya", genre: "Dram", year: 1996, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1489599809516-9827b6d1cf13?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" },
                { id: 8, title: "Hababam SÄ±nÄ±fÄ±", genre: "Komedi", year: 1975, price: 30, watched: false, poster: "https://images.unsplash.com/photo-1518676590629-3dcbd9c5a5c9?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" }
            ],
            watchedMovies: JSON.parse(localStorage.getItem('watchedMovies')) || [],
            dailyBonusClaimed: JSON.parse(localStorage.getItem('dailyBonusClaimed')) || false,
            lastAdWatch: localStorage.getItem('lastAdWatch') || null
        };
        
        // DOM elementleri
        const authSection = document.getElementById('auth-section');
        const moviesSection = document.getElementById('movies-section');
        const watchedSection = document.getElementById('watched-section');
        const searchSection = document.getElementById('search-section');
        const adWatchSection = document.getElementById('ad-watch-section');
        const accountSection = document.getElementById('account-section');
        const sidebar = document.getElementById('sidebar');
        const userInfo = document.getElementById('user-info');
        const jetonCount = document.getElementById('jeton-count');
        const moviesGrid = document.getElementById('movies-grid');
        const watchedGrid = document.getElementById('watched-grid');
        const searchResults = document.getElementById('search-results');
        const searchInput = document.getElementById('search-input');
        const bonusNotification = document.getElementById('bonus-notification');
        const adModal = document.getElementById('ad-modal');
        const countdownElement = document.getElementById('countdown');
        const dateDisplay = document.getElementById('date-display');
        const lastAdWatchElement = document.getElementById('last-ad-watch');
        const adAvailabilityElement = document.getElementById('ad-availability');
        
        // Tarih gÃ¶sterici
        function updateDateDisplay() {
            const now = new Date();
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            dateDisplay.textContent = now.toLocaleDateString('tr-TR', options);
        }
        
        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            updateDateDisplay();
            
            // KullanÄ±cÄ± giriÅŸi kontrol et
            const loggedInUser = localStorage.getItem('currentUser');
            if (loggedInUser) {
                loginUser(JSON.parse(loggedInUser));
            }
            
            // Filmleri yÃ¼kle
            renderMovies();
            
            // Reklam izleme durumunu gÃ¼ncelle
            updateAdWatchStatus();
        });
        
        // Tab geÃ§iÅŸleri
        document.querySelectorAll('[data-tab]').forEach(tab => {
            tab.addEventListener('click', function() {
                const tabId = this.getAttribute('data-tab');
                
                // TÃ¼m tablarÄ± deaktif et
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                // TÃ¼m formlarÄ± gizle
                document.getElementById('login-form').style.display = 'none';
                document.getElementById('register-form').style.display = 'none';
                
                // SeÃ§ilen tabÄ± aktif et
                this.classList.add('active');
                
                // SeÃ§ilen formu gÃ¶ster
                document.getElementById(`${tabId}-form`).style.display = 'block';
            });
        });
        
        // GiriÅŸ formu switch
        document.getElementById('switch-to-register').addEventListener('click', function() {
            document.querySelector('[data-tab="register"]').click();
        });
        
        document.getElementById('switch-to-login').addEventListener('click', function() {
            document.querySelector('[data-tab="login"]').click();
        });
        
        // GiriÅŸ yap butonu
        document.getElementById('login-btn').addEventListener('click', function() {
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value.trim();
            
            if (!username || !password) {
                alert('LÃ¼tfen kullanÄ±cÄ± adÄ± ve ÅŸifre girin!');
                return;
            }
            
            const user = state.users.find(u => u.username === username && u.password === password);
            
            if (user) {
                loginUser(user);
            } else {
                alert('KullanÄ±cÄ± adÄ± veya ÅŸifre hatalÄ±!');
            }
        });
        
        // KayÄ±t ol butonu
        document.getElementById('register-btn').addEventListener('click', function() {
            const username = document.getElementById('register-username').value.trim();
            const password = document.getElementById('register-password').value.trim();
            const passwordAgain = document.getElementById('register-password-again').value.trim();
            
            if (!username || !password || !passwordAgain) {
                alert('LÃ¼tfen tÃ¼m alanlarÄ± doldurun!');
                return;
            }
            
            if (password !== passwordAgain) {
                alert('Åžifreler eÅŸleÅŸmiyor!');
                return;
            }
            
            if (state.users.find(u => u.username === username)) {
                alert('Bu kullanÄ±cÄ± adÄ± zaten alÄ±nmÄ±ÅŸ!');
                return;
            }
            
            const newUser = {
                username,
                password,
                jets: 90,
                regDate: new Date().toLocaleDateString('tr-TR'),
                watchedMovies: []
            };
            
            state.users.push(newUser);
            localStorage.setItem('zahirTVUsers', JSON.stringify(state.users));
            
            alert('KayÄ±t baÅŸarÄ±lÄ±! GiriÅŸ yapabilirsiniz.');
            document.querySelector('[data-tab="login"]').click();
            document.getElementById('login-username').value = username;
            document.getElementById('login-password').value = '';
        });
        
        // KullanÄ±cÄ± giriÅŸ iÅŸlemi
        function loginUser(user) {
            state.currentUser = user;
            localStorage.setItem('currentUser', JSON.stringify(user));
            
            // GiriÅŸ ekranÄ±nÄ± gizle, diÄŸer bÃ¶lÃ¼mleri gÃ¶ster
            authSection.style.display = 'none';
            sidebar.style.display = 'block';
            userInfo.style.display = 'flex';
            
            // GÃ¼nlÃ¼k bonus kontrolÃ¼
            const today = new Date().toDateString();
            const lastBonusDate = localStorage.getItem('lastBonusDate');
            
            if (lastBonusDate !== today) {
                // Yeni gÃ¼n, bonus ver
                state.currentUser.jets += 30;
                updateUserInStorage();
                bonusNotification.style.display = 'flex';
                localStorage.setItem('lastBonusDate', today);
            }
            
            // Jeton sayÄ±sÄ±nÄ± gÃ¼ncelle
            jetonCount.textContent = state.currentUser.jets;
            
            // VarsayÄ±lan olarak filmler bÃ¶lÃ¼mÃ¼nÃ¼ gÃ¶ster
            showSection('movies');
            
            // MenÃ¼ tÄ±klama olaylarÄ±
            document.querySelectorAll('.nav-menu li').forEach(item => {
                item.addEventListener('click', function() {
                    // TÃ¼m menÃ¼ Ã¶ÄŸelerinden active class'Ä±nÄ± kaldÄ±r
                    document.querySelectorAll('.nav-menu li').forEach(i => i.classList.remove('active'));
                    // TÄ±klanan Ã¶ÄŸeye active class'Ä±nÄ± ekle
                    this.classList.add('active');
                    
                    // BÃ¶lÃ¼mÃ¼ gÃ¶ster
                    const section = this.getAttribute('data-section');
                    showSection(section);
                });
            });
            
            // Ã‡Ä±kÄ±ÅŸ butonu
            document.getElementById('logout-btn').addEventListener('click', logoutUser);
            
            // Bonus bildirimi kapatma
            document.getElementById('close-bonus').addEventListener('click', function() {
                bonusNotification.style.display = 'none';
            });
            
            // Reklam izleme butonu
            document.getElementById('watch-ad-btn').addEventListener('click', watchAd);
            
            // Arama kutusu
            searchInput.addEventListener('input', searchMovies);
        }
        
        // BÃ¶lÃ¼m gÃ¶sterme
        function showSection(section) {
            // TÃ¼m bÃ¶lÃ¼mleri gizle
            moviesSection.style.display = 'none';
            watchedSection.style.display = 'none';
            searchSection.style.display = 'none';
            adWatchSection.style.display = 'none';
            accountSection.style.display = 'none';
            
            // Ä°stenen bÃ¶lÃ¼mÃ¼ gÃ¶ster
            document.getElementById(`${section}-section`).style.display = 'block';
            
            // BÃ¶lÃ¼me Ã¶zel iÃ§erikleri yÃ¼kle
            if (section === 'movies') {
                renderMovies();
            } else if (section === 'watched') {
                renderWatchedMovies();
            } else if (section === 'search') {
                searchMovies();
            } else if (section === 'ad-watch') {
                updateAdWatchStatus();
            } else if (section === 'account') {
                renderAccountInfo();
            }
        }
        
        // Filmleri render et
        function renderMovies() {
            moviesGrid.innerHTML = '';
            
            state.movies.forEach(movie => {
                const isWatched = state.currentUser.watchedMovies && 
                    state.currentUser.watchedMovies.includes(movie.id);
                
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <div class="movie-title">${movie.title} (${movie.year})</div>
                        <div class="movie-price">
                            <div class="price-tag">${movie.price} Jeton</div>
                            <button class="watch-btn" data-id="${movie.id}" ${isWatched ? 'disabled' : (state.currentUser.jets < movie.price ? 'disabled' : '')}>
                                ${isWatched ? 'Ä°zlendi' : (state.currentUser.jets < movie.price ? 'Yetersiz Jeton' : 'Ä°zle')}
                            </button>
                        </div>
                    </div>
                `;
                
                moviesGrid.appendChild(movieCard);
                
                // Ä°zle butonu olayÄ±
                if (!isWatched) {
                    const watchBtn = movieCard.querySelector('.watch-btn');
                    watchBtn.addEventListener('click', function() {
                        watchMovie(movie.id);
                    });
                }
            });
        }
        
        // Film izleme
        function watchMovie(movieId) {
            const movie = state.movies.find(m => m.id === movieId);
            
            if (!movie) return;
            
            // Jeton kontrolÃ¼
            if (state.currentUser.jets < movie.price) {
                alert('Yetersiz jeton! Reklam izleyerek jeton kazanabilirsiniz.');
                return;
            }
            
            // JetonlarÄ± dÃ¼ÅŸ
            state.currentUser.jets -= movie.price;
            
            // Filmi izlenenlere ekle
            if (!state.currentUser.watchedMovies) {
                state.currentUser.watchedMovies = [];
            }
            
            if (!state.currentUser.watchedMovies.includes(movieId)) {
                state.currentUser.watchedMovies.push(movieId);
            }
            
            // KullanÄ±cÄ±yÄ± gÃ¼ncelle
            updateUserInStorage();
            
            // Jeton sayÄ±sÄ±nÄ± gÃ¼ncelle
            jetonCount.textContent = state.currentUser.jets;
            
            // Film listesini gÃ¼ncelle
            renderMovies();
            
            alert(`"${movie.title}" filmi baÅŸarÄ±yla izlendi! Kalan jeton: ${state.currentUser.jets}`);
        }
        
        // Ä°zlenen filmleri render et
        function renderWatchedMovies() {
            watchedGrid.innerHTML = '';
            
            if (!state.currentUser.watchedMovies || state.currentUser.watchedMovies.length === 0) {
                watchedGrid.innerHTML = '<p style="color:#94a3b8; text-align:center; width:100%;">HenÃ¼z hiÃ§ film izlemediniz.</p>';
                return;
            }
            
            state.currentUser.watchedMovies.forEach(movieId => {
                const movie = state.movies.find(m => m.id === movieId);
                if (!movie) return;
                
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <div class="movie-title">${movie.title} (${movie.year})</div>
                        <div class="movie-price">
                            <div style="color:#10b981; font-weight:bold;">âœ“ Ä°zlendi</div>
                        </div>
                    </div>
                `;
                
                watchedGrid.appendChild(movieCard);
            });
        }
        
        // Film ara
        function searchMovies() {
            const query = searchInput.value.toLowerCase();
            searchResults.innerHTML = '';
            
            const filteredMovies = state.movies.filter(movie => 
                movie.title.toLowerCase().includes(query) || 
                movie.genre.toLowerCase().includes(query)
            );
            
            if (filteredMovies.length === 0) {
                searchResults.innerHTML = '<p style="color:#94a3b8; text-align:center; width:100%;">AramanÄ±zla eÅŸleÅŸen film bulunamadÄ±.</p>';
                return;
            }
            
            filteredMovies.forEach(movie => {
                const isWatched = state.currentUser.watchedMovies && 
                    state.currentUser.watchedMovies.includes(movie.id);
                
                const movieCard = document.createElement('div');
                movieCard.className = 'movie-card';
                movieCard.innerHTML = `
                    <img src="${movie.poster}" alt="${movie.title}" class="movie-poster">
                    <div class="movie-info">
                        <div class="movie-title">${movie.title} (${movie.year})</div>
                        <div class="movie-price">
                            <div class="price-tag">${movie.price} Jeton</div>
                            <button class="watch-btn" data-id="${movie.id}" ${isWatched ? 'disabled' : (state.currentUser.jets < movie.price ? 'disabled' : '')}>
                                ${isWatched ? 'Ä°zlendi' : (state.currentUser.jets < movie.price ? 'Yetersiz Jeton' : 'Ä°zle')}
                            </button>
                        </div>
                    </div>
                `;
                
                searchResults.appendChild(movieCard);
                
                // Ä°zle butonu olayÄ±
                if (!isWatched) {
                    const watchBtn = movieCard.querySelector('.watch-btn');
                    watchBtn.addEventListener('click', function() {
                        watchMovie(movie.id);
                    });
                }
            });
        }
        
        // Reklam izleme durumunu gÃ¼ncelle
        function updateAdWatchStatus() {
            if (state.lastAdWatch) {
                const lastDate = new Date(state.lastAdWatch);
                lastAdWatchElement.textContent = lastDate.toLocaleDateString('tr-TR') + ' ' + lastDate.toLocaleTimeString('tr-TR');
                
                // BugÃ¼n reklam izlenmiÅŸ mi kontrol et
                const today = new Date();
                const lastAdDate = new Date(state.lastAdWatch);
                
                if (lastAdDate.toDateString() === today.toDateString()) {
                    adAvailabilityElement.textContent = "HayÄ±r, bugÃ¼n zaten reklam izlediniz";
                    adAvailabilityElement.style.color = "#ef4444";
                    document.getElementById('watch-ad-btn').disabled = true;
                } else {
                    adAvailabilityElement.textContent = "Evet, izleyebilirsiniz";
                    adAvailabilityElement.style.color = "#10b981";
                    document.getElementById('watch-ad-btn').disabled = false;
                }
            } else {
                lastAdWatchElement.textContent = "HiÃ§ izlemediniz";
                adAvailabilityElement.textContent = "Evet, izleyebilirsiniz";
                adAvailabilityElement.style.color = "#10b981";
                document.getElementById('watch-ad-btn').disabled = false;
            }
        }
        
        // Reklam izle
        function watchAd() {
            // BugÃ¼n reklam izlenmiÅŸ mi kontrol et
            const today = new Date();
            if (state.lastAdWatch) {
                const lastAdDate = new Date(state.lastAdWatch);
                if (lastAdDate.toDateString() === today.toDateString()) {
                    alert("BugÃ¼n zaten reklam izlediniz. YarÄ±n tekrar deneyin!");
                    return;
                }
            }
            
            // Reklam modalÄ±nÄ± gÃ¶ster
            adModal.style.display = 'flex';
            
            // Geri sayÄ±m
            let countdown = 5;
            countdownElement.textContent = countdown;
            
            const countdownInterval = setInterval(() => {
                countdown--;
                countdownElement.textContent = countdown;
                
                if (countdown <= 0) {
                    clearInterval(countdownInterval);
                    
                    // ReklamÄ± kapat
                    adModal.style.display = 'none';
                    
                    // Jeton ver
                    state.currentUser.jets += 30;
                    updateUserInStorage();
                    jetonCount.textContent = state.currentUser.jets;
                    
                    // Reklam izleme tarihini kaydet
                    state.lastAdWatch = new Date().toISOString();
                    localStorage.setItem('lastAdWatch', state.lastAdWatch);
                    
                    // Reklam durumunu gÃ¼ncelle
                    updateAdWatchStatus();
                    
                    alert("Reklam izleme tamamlandÄ±! 30 jeton kazandÄ±nÄ±z.");
                    
                    // Film listesini gÃ¼ncelle (jetonlar deÄŸiÅŸti)
                    renderMovies();
                }
            }, 1000);
        }
        
        // Hesap bilgilerini gÃ¶ster
        function renderAccountInfo() {
            document.getElementById('account-username').value = state.currentUser.username;
            document.getElementById('account-total-jets').value = state.currentUser.jets;
            document.getElementById('account-reg-date').value = state.currentUser.regDate || "Bilinmiyor";
            
            const totalWatched = state.currentUser.watchedMovies ? state.currentUser.watchedMovies.length : 0;
            document.getElementById('account-total-watched').value = totalWatched;
        }
        
        // KullanÄ±cÄ±yÄ± localStorage'da gÃ¼ncelle
        function updateUserInStorage() {
            // KullanÄ±cÄ±yÄ± users dizisinde gÃ¼ncelle
            const userIndex = state.users.findIndex(u => u.username === state.currentUser.username);
            if (userIndex !== -1) {
                state.users[userIndex] = state.currentUser;
                localStorage.setItem('zahirTVUsers', JSON.stringify(state.users));
            }
            
            // currentUser'Ä± gÃ¼ncelle
            localStorage.setItem('currentUser', JSON.stringify(state.currentUser));
        }
        
        // Ã‡Ä±kÄ±ÅŸ yap
        function logoutUser() {
            state.currentUser = null;
            localStorage.removeItem('currentUser');
            
            // GiriÅŸ ekranÄ±nÄ± gÃ¶ster
            authSection.style.display = 'block';
            sidebar.style.display = 'none';
            userInfo.style.display = 'none';
            
            // FormlarÄ± sÄ±fÄ±rla
            document.getElementById('login-username').value = '';
            document.getElementById('login-password').value = '';
            document.querySelector('[data-tab="login"]').click();
            
            // Bonus bildirimini gizle
            bonusNotification.style.display = 'none';
        }
        
        // Enter tuÅŸu ile giriÅŸ
        document.getElementById('login-password').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                document.getElementById('login-btn').click();
            }
        });
        
        document.getElementById('register-password-again').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                document.getElementById('register-btn').click();
            }
        });
    </script>
</body>
</html>
